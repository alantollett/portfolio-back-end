(this["webpackJsonpportolio-front-end"]=this["webpackJsonpportolio-front-end"]||[]).push([[0],{28:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(21),i=n.n(s),o=(n(28),n(2)),c=n(4),l=n(3),u=n(22),d=n(0);function h(e){return Object(d.jsx)("nav",{children:Object(d.jsxs)("div",{className:"wrapper",children:[Object(d.jsx)("button",{onClick:function(){return e.openPage("home")},className:"home-button",children:"PORTFOLIO OPTIMISER"}),Object(d.jsx)("div",{className:"right",children:e.user?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return e.openPage("portfolio")},children:"My Portfolio"}),Object(d.jsx)("button",{onClick:function(){return e.openPage("optimise2d")},children:"Optimise 2D"}),Object(d.jsx)("button",{onClick:function(){return e.openPage("optimise3d")},children:"Optimise 3D"}),Object(d.jsx)("button",{onClick:function(){return e.logout()},children:"Logout"})]}):Object(d.jsx)("button",{onClick:function(){return e.openPage("account")},children:"Login"})})]})})}function p(e){var t=e.children,n=e.closeEarly;return Object(d.jsx)("div",{className:"wrapper",children:Object(d.jsxs)("div",{className:t.error?"pop-up red":"pop-up green",children:[t.message,Object(d.jsx)("button",{className:"close-button",onClick:function(){return n(t)},children:Object(d.jsx)("i",{className:"fa fa-times"})})]})})}var j=n.p+"static/media/visualisation.53cc120e.mp4";function m(e){var t=e.openPage;return Object(d.jsxs)("div",{className:"home wrapper",children:[Object(d.jsx)("h1",{children:"PORTFOLIO OPTIMISER"}),Object(d.jsxs)("h2",{children:["Helping you to invest only in the market's most",Object(d.jsx)("span",{className:"blue",children:" optimal"})," porfolios..."]}),Object(d.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,children:Object(d.jsx)("source",{src:j,type:"video/mp4"})}),Object(d.jsx)("button",{onClick:function(){return t("account")},children:"Start Investing Now!"})]})}var b=n(8),f=n(5),g=n.n(f),O=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(b.a)({},e.target.name,e.target.value))},r.loginUser=function(e){e.preventDefault();var t=r.props,n=t.openPage,a=t.login,s=t.popUp,i={email:r.state.email,password:r.state.password};g.a.post("".concat("https://www.gh0stmod.com","/user/login"),{user:i},{crossDomain:!1}).then((function(e){a(e.data.shortAccessToken,e.data.fullAccessToken),n("portfolio")})).catch((function(e){if(!e.response)return s("Failed to connect to server, please try again soon.",!0);var t=e.response.status;return s(404===t||401===t?"The account information you provided is incorrect.":412===t?"You must verify your email before logging in.":"Unknown Error, please contact alantollett@outlook.com.",!0)}))},r.render=function(){return Object(d.jsxs)("div",{className:"grid-item",children:[Object(d.jsx)("h1",{children:"Sign In"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",onChange:r.handleChange}),Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",onChange:r.handleChange}),Object(d.jsx)("button",{onClick:r.loginUser,children:"Sign In"})]})]})},r.state={email:null,password:null},r}return n}(a.a.Component),x=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(b.a)({},e.target.name,e.target.value))},r.areInputsValid=function(){var e=r.state,t=e.email,n=e.email2,a=e.password,s=e.password2,i=r.props.popUp;return null==t||null==n||t!==n?(i("Please enter two matching emails.",!0),!1):null==a||null==s||a!==s?(i("Please enter two matching passwords.",!0),!1):!!new RegExp("^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(a)||(i("Your password must contain at least one symbol, uppercase, and numerical character, and be at least 8 characters long.",!0),!1)},r.registerUser=function(e){e.preventDefault();var t=r.props.popUp,n=r.state,a=n.email,s=n.password;if(r.areInputsValid()){var i={email:a,password:s};g.a.post("".concat("https://www.gh0stmod.com","/user/register"),{user:i},{crossDomain:!1}).then((function(e){t("Please check your email to verify your account.",!1)})).catch((function(e){if(!e.response)return t("Failed to connect to server, please try again soon.",!0);var n=e.response.status;return t(409===n?"An account with that email address already exists.":500===n?"Internal Server Error, please contact alantollett@outlook.com.":"Unknown Error, please contact alantollett@outlook.com.",!0)}))}},r.render=function(){return Object(d.jsxs)("div",{className:"grid-item",children:[Object(d.jsx)("h1",{children:"Sign Up"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",onChange:r.handleChange}),Object(d.jsx)("label",{children:"Confirm Email"}),Object(d.jsx)("input",{type:"email2",name:"email2",onChange:r.handleChange}),Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",onChange:r.handleChange}),Object(d.jsx)("label",{children:"Confirm Password"}),Object(d.jsx)("input",{type:"password",name:"password2",onChange:r.handleChange}),Object(d.jsx)("button",{onClick:r.registerUser,children:"Sign Up"})]})]})},r.state={email:null,email2:null,password:null,password2:null},r}return n}(a.a.Component);function v(e){var t=e.login,n=e.openPage,r=e.popUp;return Object(d.jsx)("div",{className:"account wrapper",children:Object(d.jsxs)("div",{className:"grid",children:[Object(d.jsx)(O,{login:t,openPage:n,popUp:r}),Object(d.jsx)(x,{popUp:r})]})})}var k=n(6),y=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props,t=e.closeFunc,n=e.title,r=e.children;return Object(d.jsx)("div",{className:"modal-background",children:Object(d.jsxs)("div",{className:"modal",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("h1",{style:{color:"white",margin:"0"},children:n}),Object(d.jsx)("button",{onClick:t,className:"close-button",children:Object(d.jsx)("i",{className:"fa fa-times"})})]}),Object(d.jsx)("div",{className:"modal-body",children:r})]})})}}]),n}(a.a.Component),S=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).render=function(){var e=r.state,t=e.companies,n=e.error,a=r.props.handleChange;return n?Object(d.jsx)("div",{children:n.message}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{children:"Company"}),t?Object(d.jsxs)("select",{name:"ticker",onChange:a,children:[Object(d.jsx)("option",{value:"Select Ticker",children:"Select Company"}),t.map((function(e,t){return Object(d.jsx)("option",{value:e.Symbol,children:e.Name},t)}))]}):Object(d.jsx)("p",{children:"Loading Companies..."})]})},r.state={companies:null,error:null},r}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.a.get("".concat("https://www.gh0stmod.com","/data/companies")).then((function(t){e.setState({companies:t.data})})).catch((function(t){e.setState({error:t})}))}}]),n}(a.a.Component),w=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=function(e){return r.setState(Object(b.a)({},e.target.name,e.target.value))},r.buyShares=function(e){e.preventDefault();var t=r.state,n=t.numShares,a=t.ticker,s=r.props,i=s.closeFunc,o=s.user,c=s.popUp;if(!a||n<=0)return i(),void c("You must select a ticker and a positive number of shares.",!0);var l={ticker:r.state.ticker,numShares:r.state.numShares};g.a.post("".concat("https://www.gh0stmod.com","/user/investments"),{investment:l},{headers:{Authorization:"Bearer ".concat(o.token)}}).then((function(e){i(),c("Share(s) Purchased Successfully",!1)})).catch((function(e){console.log(e)}))},r.state={ticker:null,numShares:0},r}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props.closeFunc;return Object(d.jsx)(y,{closeFunc:e,title:"Buy Share(s)",children:Object(d.jsxs)("form",{children:[Object(d.jsx)(S,{handleChange:this.handleChange}),Object(d.jsx)("label",{children:"Number of Shares"}),Object(d.jsx)("input",{type:"number",name:"numShares",min:"1",onChange:this.handleChange}),Object(d.jsxs)("button",{onClick:this.buyShares,children:["Buy ",this.state.numShares," Shares"]})]})})}}]),n}(a.a.Component),C=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).sellShare=function(t){var n=e.props,r=n.user,a=n.popUp,s=n.updateInvestments,i={ticker:t,numShares:-1};g.a.post("".concat("https://www.gh0stmod.com","/user/investments"),{investment:i},{headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(e){a("Share(s) Sold Successfully",!1),s()})).catch((function(e){console.log(e)}))},e.render=function(){var t=e.props.investments;return Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Ticker"}),Object(d.jsx)("th",{children:"Number of Shares"}),Object(d.jsx)("th",{children:"Price per Share"}),Object(d.jsx)("th",{children:"Current Value"}),Object(d.jsx)("th",{children:"Sell"})]})}),Object(d.jsx)("tbody",{children:t.map((function(t,n){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t.name}),Object(d.jsx)("td",{children:t.ticker}),Object(d.jsx)("td",{children:t.numShares}),Object(d.jsxs)("td",{children:["$",t.sharePrice]}),Object(d.jsxs)("td",{children:["$",Number(t.sharePrice*t.numShares).toFixed(2)]}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){return e.sellShare(t.ticker)},children:"Sell A Share"})})]},n)}))})]})},e}return n}(a.a.Component),P=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).updateInvestments=function(){r.setState({investments:null}),g.a.get("".concat("https://www.gh0stmod.com","/user/investments"),{headers:{Authorization:"Bearer ".concat(r.props.user.token)}}).then((function(e){r.setState({investments:e.data})})).catch((function(e){r.setState({error:e})}))},r.openModal=function(){r.setState({modalVisible:!0})},r.closeModal=function(){r.setState({modalVisible:!1}),r.updateInvestments()},r.render=function(){var e=r.state,t=e.investments,n=e.error,a=e.modalVisible,s=r.props,i=s.user,o=s.popUp;return n?Object(d.jsx)("div",{children:n.message}):Object(d.jsxs)("div",{className:"investments",children:[Object(d.jsx)("h1",{children:"My Investments"}),a?Object(d.jsx)(w,{closeFunc:r.closeModal,user:i,popUp:o}):null,Object(d.jsx)("button",{className:"buy-button",onClick:function(){return r.openModal()},children:"Buy Share(s)"}),t?Object(d.jsx)(C,{investments:t,user:i,popUp:o,updateInvestments:r.updateInvestments}):Object(d.jsx)("div",{children:"Downloading Investments Data..."})]})},r.state={modalVisible:!1,error:null,investments:null},r}return Object(k.a)(n,[{key:"componentDidMount",value:function(){this.updateInvestments()}}]),n}(a.a.Component),N=n(9),D=n.n(N),U=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).getWorthsFiltered=function(){var e=r.state,t=e.worths,n=e.range,a=new Date;if(a.setHours(0),a.setMinutes(0),a.setSeconds(0),"w"===n){var s=a.getDay()-1;a.setDate(a.getDate()-s)}else if("m"===n){var i=a.getDate()-1;a.setDate(a.getDate()-i)}else"y"===n&&(a.setMonth(0),a.setDate(1));return"max"===n&&(a=new Date(t[0].date)),t.filter((function(e){var t=new Date(e.date);return 0!==t.getDay()&&6!==t.getDay()&&t>=a}))},r.changeRange=function(e){return r.setState({range:e})},r.render=function(){var e=r.state,t=e.error,n=e.range,a=e.worths;if(t)return Object(d.jsx)("div",{children:t.message});if(a){if(0===a.length)return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"My Portfolio"}),Object(d.jsx)("h2",{children:"No data yet..."})]});var s=r.getWorthsFiltered(),i=s.map((function(e){return new Date(e.date)})),o=s.map((function(e){return e.amount})),c=o[0]>o[o.length-1]?"red":"green";return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"My Portfolio"}),Object(d.jsxs)("h2",{children:["$",a[a.length-1].amount]}),Object(d.jsxs)("div",{className:"ranges",children:[Object(d.jsx)("button",{onClick:function(){return r.changeRange("d")},className:"d"===n?"active":null,children:"1D"}),Object(d.jsx)("button",{onClick:function(){return r.changeRange("w")},className:"w"===n?"active":null,children:"1W"}),Object(d.jsx)("button",{onClick:function(){return r.changeRange("m")},className:"m"===n?"active":null,children:"1M"}),Object(d.jsx)("button",{onClick:function(){return r.changeRange("y")},className:"y"===n?"active":null,children:"1Y"}),Object(d.jsx)("button",{onClick:function(){return r.changeRange("max")},className:"max"===n?"active":null,children:"MAX"})]}),Object(d.jsx)(D.a,{className:"graph",data:[{x:i,y:o,type:"scatter",mode:"markers&lines",line:{color:c},text:o,hovertemplate:"<b>%{x}<br>$%{y}</b><extra></extra>"}],layout:{hovermode:"closest",hoverlabel:{bgcolor:"#FFF"},margin:{l:50,r:50,b:50,t:10}},useResizeHandler:!0,config:{displayModeBar:!1},style:{width:"100%"}})]})}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"My Portfolio"}),Object(d.jsx)("h2",{children:"Loading..."})]})},r.state={error:null,worths:null,range:"max"},r}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.a.get("".concat("https://www.gh0stmod.com","/user/worths"),{headers:{Authorization:"Bearer ".concat(this.props.user.token)}}).then((function(t){e.setState({worths:t.data})})).catch((function(t){e.setState({error:t})}))}}]),n}(a.a.Component);function R(e){var t=e.user,n=e.popUp;return Object(d.jsxs)("div",{className:"portfolio wrapper",children:[Object(d.jsx)(U,{user:t}),Object(d.jsx)(P,{user:t,popUp:n})]})}var F=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).render=function(){var t=e.props,n=t.tickers,r=t.handleChange,a=t.removeTicker;return Object(d.jsxs)("div",{className:"tickers",children:[Object(d.jsx)(S,{handleChange:r}),Array.from(n).map((function(e,t){return Object(d.jsxs)("span",{className:"ticker",children:[e,Object(d.jsx)("button",{className:"close-button",onClick:function(t){t.preventDefault(),a(e)},children:Object(d.jsx)("i",{className:"fa fa-times"})})]},t)}))]})},e}return n}(a.a.Component),z=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=function(e){if("ticker"===e.target.name){var t=r.state.tickers;5===t.size?r.props.popUp("You can only add ".concat(5," stocks to a portfolio."),!0):(t.add(e.target.value),r.setState({tickers:t}))}else"optimalOnly"===e.target.name?r.setState({optimalOnly:!e.target.checked}):r.setState(Object(b.a)({},e.target.name,e.target.value))},r.removeTicker=function(e){var t=r.state.tickers;t.delete(e),r.setState({tickers:t})},r.loadVisualisation=function(e){e.preventDefault(),r.props.updateSettings({tickers:r.state.tickers,riskWeighting:r.state.riskWeighting,returnWeighting:r.state.returnWeighting,optimalOnly:r.state.optimalOnly})},r.render=function(){var e=r.state.tickers;return Object(d.jsxs)("div",{className:"settings grid-item",children:[Object(d.jsx)("h1",{children:"Settings"}),Object(d.jsxs)("form",{children:[Object(d.jsx)(F,{tickers:e,handleChange:r.handleChange,removeTicker:r.removeTicker}),Object(d.jsx)("label",{children:"Risk"}),Object(d.jsxs)("p",{children:["Move the slider closer to the factor which you would prefer to ",Object(d.jsx)("b",{children:"minimise"}),"."]}),Object(d.jsxs)("div",{className:"slider",children:[Object(d.jsx)("span",{children:"Standard Deviation"}),Object(d.jsx)("span",{style:{float:"right"},children:"Price to Book Value"}),Object(d.jsx)("input",{type:"range",min:"0",max:"1",value:r.state.riskWeighting,step:"0.25",name:"riskWeighting",onChange:r.handleChange})]}),Object(d.jsx)("label",{children:"Return"}),Object(d.jsxs)("p",{children:["Move the slider closer to the factor which you would prefer to ",Object(d.jsx)("b",{children:"maximise"}),"."]}),Object(d.jsxs)("div",{className:"slider",children:[Object(d.jsx)("span",{children:"Expected Return"}),Object(d.jsx)("span",{style:{float:"right"},children:"Dividend Yield"}),Object(d.jsx)("input",{type:"range",min:"0",max:"1",value:r.state.returnWeighting,step:"0.25",name:"returnWeighting",onChange:r.handleChange})]}),Object(d.jsx)("label",{style:{display:"inline",marginRight:"1em"},children:"Display Non-Optimal Portfolios"}),Object(d.jsx)("input",{style:{width:"fit-content",transform:"scale(1.5)"},type:"checkbox",name:"optimalOnly",onChange:r.handleChange}),Object(d.jsx)("button",{className:"optimise-button",onClick:r.loadVisualisation,children:"View Optimal Portfolios"})]})]})},r.state={tickers:new Set,riskWeighting:.5,returnWeighting:.5,optimalOnly:!0},r}return n}(a.a.Component),M=n(11),I=n.n(M),W=n(23),T=n(12),B=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).loadRequiredInvestments=function(){var e=r.state.userInvestments,t=r.props.portfolio,n=t.tickers,a=t.weights,s=null;if(e){var i=a.map((function(e){return 100*e})),o=r.findGCD(i);s=(s=(i=i.map((function(e){return e/o}))).map((function(t,r){var a=n[r],s=t,i=e.filter((function(e){return e.ticker===a}));return i.length>0&&(s-=i[0].numShares),{ticker:n[r],numShares:s}}))).filter((function(e){return 0!==e.numShares}));var c,l=Object(T.a)(e);try{for(l.s();!(c=l.n()).done;){var u=c.value;n.includes(u.ticker)||s.push({ticker:u.ticker,numShares:-u.numShares})}}catch(d){l.e(d)}finally{l.f()}r.setState({investmentsRequired:s,toBuy:s.filter((function(e){return e.numShares>0})),toSell:s.filter((function(e){return e.numShares<0}))})}},r.obtainPortfolio=Object(W.a)(I.a.mark((function e(){var t,n,a,s,i,o,c,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.props,n=t.closeFunc,a=t.popUp,s=t.user,i=r.state.investmentsRequired,o=Object(T.a)(i),e.prev=3,o.s();case 5:if((c=o.n()).done){e.next=11;break}return l=c.value,e.next=9,g.a.post("".concat("https://www.gh0stmod.com","/user/investments"),{investment:l},{headers:{Authorization:"Bearer ".concat(s.token)}}).catch((function(e){console.log(e)}));case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:n(),a("Portfolio Obtained Successfully",!1);case 21:case"end":return e.stop()}}),e,null,[[3,13,16,19]])}))),r.state={userInvestments:null,investmentsRequired:null},r}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.a.get("".concat("https://www.gh0stmod.com","/user/investments"),{headers:{Authorization:"Bearer ".concat(this.props.user.token)}}).then((function(t){e.setState({userInvestments:t.data}),e.loadRequiredInvestments()})).catch((function(t){e.setState({error:t})}))}},{key:"gcd",value:function(e,t){return 0===e?t:this.gcd(t%e,e)}},{key:"findGCD",value:function(e){for(var t=e[0],n=1;n<e.length;n++)if(1===(t=this.gcd(e[n],t)))return 1;return t}},{key:"render",value:function(){var e=this.state,t=e.toBuy,n=e.toSell,r=e.userInvestments,a=this.props,s=a.closeFunc,i=a.portfolio;return Object(d.jsx)(y,{closeFunc:s,title:"Obtain Portfolio",children:r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Portfolio Details"}),Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:["Expected Return: ",i.expectedReturn]}),Object(d.jsxs)("li",{children:["Dividend Yield: ",i.expectedDividendYield]}),Object(d.jsxs)("li",{children:["Standard Deviation: ",i.standardDeviation]}),Object(d.jsxs)("li",{children:["Price to Book Value: ",i.priceToBook]})]}),Object(d.jsx)("h2",{children:"To obtain this portfolio..."}),t&&0!==t.length?Object(d.jsx)("ul",{children:t.map((function(e,t){return Object(d.jsxs)("li",{className:"green",children:["+ ",e.numShares," share(s) in ",e.ticker,"."]},t)}))}):Object(d.jsx)("h2",{children:"Buy Nothing!"}),n&&0!==n.length?Object(d.jsx)("ul",{children:n.map((function(e,t){return Object(d.jsxs)("li",{className:"red",children:["- ",Math.abs(e.numShares)," share(s) in ",e.ticker,"."]},t)}))}):Object(d.jsx)("h2",{children:"And Sell Nothing!"}),Object(d.jsx)("button",{onClick:this.obtainPortfolio,children:"Obtain Portfolio"})]}):Object(d.jsx)("div",{className:"loading",children:"Calculating..."})})}}]),n}(a.a.Component),A=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).getDatasets=function(){var e=r.props.settings,t=r.state.portfolios,n=t.filter((function(e){return e.efficient})).map((function(t){return t.standardDeviation*e.riskWeighting+t.priceToBook*(1-e.riskWeighting)})),a=t.filter((function(e){return e.efficient})).map((function(t){return t.expectedReturn*e.returnWeighting+t.expectedDividendYield*(1-e.returnWeighting)})),s={customdata:t,x:n,y:a,text:t.map((function(e){return e.asString})),type:"scatter",mode:"markers",marker:{color:"gold",size:5},hovertemplate:"<b>Risk: %{x}%</b><br><b>Return: %{y}%</b><br>%{text}<br><b>Click to buy portfolio.</b><extra></extra>"},i=[s];if(!e.optimalOnly){var o=t.filter((function(e){return!e.efficient})).map((function(t){return t.standardDeviation*e.riskWeighting+t.priceToBook*(1-e.riskWeighting)})),c=t.filter((function(e){return!e.efficient})).map((function(t){return t.expectedReturn*e.returnWeighting+t.expectedDividendYield*(1-e.returnWeighting)})),l=JSON.parse(JSON.stringify(s));l.x=o,l.y=c,l.marker={color:"blue",size:5},i.push(l)}return i},r.openPortfolio=function(e){r.setState({portfolio:e})},r.closePortfolio=function(){r.setState({portfolio:null})},r.render=function(){var e=r.props,t=e.popUp,n=e.user,a=r.state,s=a.portfolios,i=a.error,o=a.portfolio;return i?Object(d.jsx)("div",{children:i.message}):s?Object(d.jsxs)(d.Fragment,{children:[o?Object(d.jsx)(B,{popUp:t,closeFunc:r.closePortfolio,portfolio:o,user:n}):null,Object(d.jsxs)("div",{className:"graph grid-item",children:[Object(d.jsx)("h1",{children:"Portfolios"}),Object(d.jsx)(D.a,{data:r.getDatasets(),layout:{margin:{l:60,r:0,b:60,t:0},hovermode:"closest",hoverlabel:{bgcolor:"#FFF"},showlegend:!1,xaxis:{title:"Risk"},yaxis:{title:"Return"}},onClick:function(e){setTimeout((function(){r.openPortfolio(e.points[0].customdata)}),125)},useResizeHandler:!0,config:{displayModeBar:!1},style:{margin:"auto",width:"100%",maxWidth:"600px",height:"500px"}})]})]}):Object(d.jsx)("div",{className:"graph grid-item",children:Object(d.jsx)("h1",{children:"Loading Portfolios..."})})},r.state={error:null,portfolios:null,portfolio:null},r}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.settings,r=t.user,a="";n.tickers.forEach((function(e){return a+=e+"-"})),a=a.substr(0,a.length-1);var s=new URLSearchParams;s.append("tickers",a),s.append("riskWeighting",n.riskWeighting),s.append("returnWeighting",n.returnWeighting),g.a.get("".concat("https://www.gh0stmod.com","/data/portfolios2d"),{headers:{Authorization:"Bearer ".concat(r.token)},params:s}).then((function(t){e.setState({portfolios:t.data})})).catch((function(t){e.setState({error:t})}))}}]),n}(a.a.Component),E=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).updateSettings=function(e){0!==e.tickers.size?(r.setState({settings:null}),setTimeout((function(){r.setState({settings:e})}),5)):r.props.popUp("You must select 1 or more tickers.",!0)},r.render=function(){var e=r.props,t=e.popUp,n=e.user,a=r.state.settings;return Object(d.jsx)("div",{className:"optimise wrapper",children:Object(d.jsxs)("div",{className:"grid",children:[Object(d.jsx)(z,{updateSettings:r.updateSettings,popUp:t}),a?Object(d.jsx)(A,{user:n,settings:a,popUp:t}):null]})})},r.state={settings:null},r}return n}(a.a.Component),V=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).getDatasets=function(){var e=r.props.settings,t=r.state.portfolios,n=t.filter((function(e){return e.efficient})).map((function(t){return t[e.x]})),a=t.filter((function(e){return e.efficient})).map((function(t){return t[e.y]})),s=t.filter((function(e){return e.efficient})).map((function(t){return t[e.z]})),i={customdata:t,x:n,y:a,z:s,text:t.map((function(e){return e.asString})),type:"scatter3d",mode:"markers",marker:{color:"gold",size:5},hovertemplate:"<b>".concat(e.z,": %{z}%</b><br>")+"<b>".concat(e.x,": %{x}%</b><br>")+"<b>".concat(e.y,": %{y}%</b><br>")+"%{text}<br><b>Click to buy portfolio.</b><extra></extra>"},o=[i];if(!e.optimalOnly){var c=t.filter((function(e){return!e.efficient})).map((function(t){return t[e.x]})),l=t.filter((function(e){return!e.efficient})).map((function(t){return t[e.y]})),u=t.filter((function(e){return!e.efficient})).map((function(t){return t[e.z]})),d=JSON.parse(JSON.stringify(i));d.x=c,d.y=l,d.z=u,d.marker={color:"blue",size:5},o.push(d)}return o},r.openPortfolio=function(e){r.setState({portfolio:e})},r.closePortfolio=function(){r.setState({portfolio:null})},r.render=function(){var e=r.props,t=e.settings,n=e.popUp,a=e.user,s=r.state,i=s.portfolios,o=s.error,c=s.portfolio;return o?Object(d.jsx)("div",{children:o.message}):i?Object(d.jsxs)(d.Fragment,{children:[c?Object(d.jsx)(B,{popUp:n,closeFunc:r.closePortfolio,portfolio:c,user:a}):null,Object(d.jsxs)("div",{className:"graph grid-item",children:[Object(d.jsx)("h1",{children:"Portfolios"}),Object(d.jsx)(D.a,{data:r.getDatasets(),layout:{scene:{xaxis:{title:t.x,autorange:"reversed"},yaxis:{title:t.y,autorange:"reversed"},zaxis:{title:t.z},camera:{center:{x:.05,y:0,z:-.15},eye:{x:1.3,y:1.3,z:.1}}},margin:{l:.1,r:.1,b:.1,t:.1},hovermode:"closest",hoverlabel:{bgcolor:"#FFF"},showlegend:!1},onClick:function(e){setTimeout((function(){r.openPortfolio(e.points[0].customdata)}),125)},useResizeHandler:!0,config:{displayModeBar:!1},style:{margin:"auto",width:"100%",maxWidth:"600px",height:"500px"}})]})]}):Object(d.jsx)("div",{className:"graph grid-item",children:Object(d.jsx)("h1",{children:"Loading Portfolios..."})})},r.state={error:null,portfolios:null,portfolio:null},r}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.settings,r=t.user,a="";n.tickers.forEach((function(e){return a+=e+"-"})),a=a.substr(0,a.length-1);var s=new URLSearchParams;s.append("tickers",a),g.a.get("".concat("https://www.gh0stmod.com","/data/portfolios"),{headers:{Authorization:"Bearer ".concat(r.token)},params:s}).then((function(t){e.setState({portfolios:t.data})})).catch((function(t){e.setState({error:t})}))}}]),n}(a.a.Component),Y=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).render=function(){var e=r.state.axes,t=r.props,n=t.name,a=t.handleChange,s=t.selected;return Object(d.jsxs)("div",{className:"tickers",children:[Object(d.jsxs)("label",{children:[n.toUpperCase()," Axis"]}),Object(d.jsx)("select",{name:n,onChange:a,defaultValue:e[s][0],children:e.map((function(e,t){return Object(d.jsx)("option",{value:e[0],children:e[1]},t)}))})]})},r.state={axes:[["standardDeviation","Standard Deviation"],["expectedDividendYield","Expected Dividend Yield"],["expectedReturn","Expected Return"]]},r}return n}(a.a.Component),L=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleChange=function(e){if("ticker"===e.target.name){var t=r.state.tickers;5===t.size?r.props.popUp("You can only add ".concat(5," stocks to a portfolio."),!0):(t.add(e.target.value),r.setState({tickers:t}))}else"optimalOnly"===e.target.name?r.setState({optimalOnly:!e.target.checked}):r.setState(Object(b.a)({},e.target.name,e.target.value))},r.removeTicker=function(e){var t=r.state.tickers;t.delete(e),r.setState({tickers:t})},r.loadVisualisation=function(e){e.preventDefault(),r.props.updateSettings({tickers:r.state.tickers,x:r.state.x,y:r.state.y,z:r.state.z,optimalOnly:r.state.optimalOnly})},r.render=function(){var e=r.state.tickers;return Object(d.jsxs)("div",{className:"settings grid-item",children:[Object(d.jsx)("h1",{children:"Settings"}),Object(d.jsxs)("form",{children:[Object(d.jsx)(F,{tickers:e,handleChange:r.handleChange,removeTicker:r.removeTicker}),Object(d.jsx)(Y,{name:"x",selected:0,handleChange:r.handleChange}),Object(d.jsx)(Y,{name:"y",selected:1,handleChange:r.handleChange}),Object(d.jsx)(Y,{name:"z",selected:2,handleChange:r.handleChange}),Object(d.jsx)("label",{style:{display:"inline",marginRight:"1em"},children:"Display Non-Optimal Portfolios"}),Object(d.jsx)("input",{style:{width:"fit-content",transform:"scale(1.5)"},type:"checkbox",name:"optimalOnly",onChange:r.handleChange}),Object(d.jsx)("button",{className:"optimise-button",onClick:r.loadVisualisation,children:"View Optimal Portfolios"})]})]})},r.state={tickers:new Set,x:"standardDeviation",y:"expectedDividendYield",z:"expectedReturn",optimalOnly:!0},r}return n}(a.a.Component),J=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).updateSettings=function(e){0!==e.tickers.size&&e.x&&e.y&&e.z?(r.setState({settings:null}),setTimeout((function(){r.setState({settings:e})}),5)):r.props.popUp("You must select 1 or more tickers and a value for each axis.",!0)},r.render=function(){var e=r.props,t=e.user,n=e.popUp,a=r.state.settings;return Object(d.jsx)("div",{className:"optimise wrapper",children:Object(d.jsxs)("div",{className:"grid",children:[Object(d.jsx)(L,{updateSettings:r.updateSettings,popUp:n}),a?Object(d.jsx)(V,{user:t,settings:a,popUp:n}):null]})})},r.state={settings:null},r}return n}(a.a.Component),q=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).openPage=function(e){return r.setState({currentPage:e})},r.login=function(e,t){var n=Object(u.a)(t);n.token=e,r.setState({user:n})},r.logout=function(){return r.setState({user:null,currentPage:"home"})},r.addPopUp=function(e,t){var n={message:e,error:t},a=r.state.popUps;a.push(n),r.setState({popUps:a}),setTimeout((function(){r.removePopUp(n)}),4e3)},r.removePopUp=function(e){var t=r.state.popUps;t.includes(e)&&(t=t.filter((function(t){return t!==e})),r.setState({popUps:t}))},r.render=function(){var e=r.state,t=e.currentPage,n=e.popUps,a=e.user;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h,{user:a,openPage:r.openPage,page:t,logout:r.logout}),n?n.map((function(e,t){return Object(d.jsx)(p,{closeEarly:r.removePopUp,children:e},t)})):null,"home"===t?Object(d.jsx)(m,{openPage:r.openPage}):null,"account"===t?Object(d.jsx)(v,{login:r.login,popUp:r.addPopUp,openPage:r.openPage}):null,"portfolio"===t?Object(d.jsx)(R,{user:a,popUp:r.addPopUp}):null,"optimise2d"===t?Object(d.jsx)(E,{user:a,popUp:r.addPopUp}):null,"optimise3d"===t?Object(d.jsx)(J,{user:a,popUp:r.addPopUp}):null]})},r.state={currentPage:"home",popUps:[],user:null},r}return n}(a.a.Component);i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(q,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.25a92cd3.chunk.js.map